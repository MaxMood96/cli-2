# Snapshot report for `tests/framework-detection.test.js`

The actual snapshot is saved in `framework-detection.test.js.snap`.

Generated by [AVA](https://avajs.dev).

## should default to process.cwd() and static server

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ No app server detected. Using simple static server␊
    ◈ Unable to determine public folder to serve files from. Using current working directory␊
    ◈ Setup a netlify.toml file with a [dev] section to specify your dev server settings.␊
    ◈ See docs at: https://cli.netlify.com/netlify-dev#project-detection␊
    ◈ Running static server from "site-with-index-file"␊
    ␊
    ◈ Static server listening to 88888␊
    ␊
       ┌──────────────────────────────────────────────────┐␊
       │                                                  │␊
       │   ◈ Server now ready on http://localhost:88888   │␊
       │                                                  │␊
       └──────────────────────────────────────────────────┘␊
    ␊
    `

## should use static server when --dir flag is passed

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Using simple static server because '--dir' flag was specified␊
    ◈ Running static server from "site-with-index-file/public"␊
    ␊
    ◈ Static server listening to 88888␊
    ␊
       ┌──────────────────────────────────────────────────┐␊
       │                                                  │␊
       │   ◈ Server now ready on http://localhost:88888   │␊
       │                                                  │␊
       └──────────────────────────────────────────────────┘␊
    ␊
    `

## should use static server when framework is set to #static

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Using simple static server because '[dev.framework]' was set to '#static'␊
    ◈ Unable to determine public folder to serve files from. Using current working directory␊
    ◈ Setup a netlify.toml file with a [dev] section to specify your dev server settings.␊
    ◈ See docs at: https://cli.netlify.com/netlify-dev#project-detection␊
    ◈ Running static server from "site-with-index-file"␊
    ␊
    ◈ Static server listening to 88888␊
    ␊
       ┌──────────────────────────────────────────────────┐␊
       │                                                  │␊
       │   ◈ Server now ready on http://localhost:88888   │␊
       │                                                  │␊
       └──────────────────────────────────────────────────┘␊
    ␊
    `

## should warn if using static server and `command` is configured

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Using simple static server because '--dir' flag was specified␊
    ◈ Ignoring command setting since using a simple static server. Configure 'command' and 'targetPort' for a custom setup␊
    ◈ Running static server from "site-with-index-file/public"␊
    ␊
    ◈ Static server listening to 88888␊
    ␊
       ┌──────────────────────────────────────────────────┐␊
       │                                                  │␊
       │   ◈ Server now ready on http://localhost:88888   │␊
       │                                                  │␊
       └──────────────────────────────────────────────────┘␊
    ␊
    `

## should warn if using static server and `targetPort` is configured

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Using simple static server because '--dir' flag was specified␊
    ◈ Ignoring 'targetPort' setting since using a simple static server.␊
    ◈ Use --staticServerPort or [dev.staticServerPort] to configure the static server port␊
    ◈ Running static server from "site-with-index-file/public"␊
    ␊
    ◈ Static server listening to 88888␊
    ␊
       ┌──────────────────────────────────────────────────┐␊
       │                                                  │␊
       │   ◈ Server now ready on http://localhost:88888   │␊
       │                                                  │␊
       └──────────────────────────────────────────────────┘␊
    ␊
    `

## should use `command` and `targetPort` when configured

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Starting Netlify Dev with custom config␊
    ◈ Netlify Dev could not connect to localhost:3000.␊
    ◈ Please make sure your framework server is running on port 3000`

## should force specific framework when configured

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Starting Netlify Dev with Create React App␊
    Error: spawn react-scripts ENOENT␊
        at Process.ChildProcess._handle.onexit (node:internal/child_process:282:19)␊
        at onErrorNT (node:internal/child_process:480:16)␊
        at processTicksAndRejections (node:internal/process/task_queues:83:21) {␊
      errno: -2,␊
      code: 'ENOENT',␊
      syscall: 'spawn react-scripts',␊
      path: 'react-scripts',␊
      spawnargs: [ 'start' ]␊
    }`

## should throw when forcing a non supported framework

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Invalid framework "to-infinity-and-beyond-js". It should be one of: docusaurus, docusaurus-v2, eleventy, gatsby, gridsome, hexo, hugo, jekyll, middleman, next-nx, next, blitz, nuxt, phenomic, react-static, redwoodjs, stencil, vuepress, assemble, docpad, harp, metalsmith, roots, wintersmith, cecil, angular, create-react-app, ember, expo, quasar, quasar-v0.17, sapper, svelte, svelte-kit, vue, brunch, parcel, grunt, gulp, vite, wmr`

## should detect a known framework

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Starting Netlify Dev with Create React App␊
    Error: spawn react-scripts ENOENT␊
        at Process.ChildProcess._handle.onexit (node:internal/child_process:282:19)␊
        at onErrorNT (node:internal/child_process:480:16)␊
        at processTicksAndRejections (node:internal/process/task_queues:83:21) {␊
      errno: -2,␊
      code: 'ENOENT',␊
      syscall: 'spawn react-scripts',␊
      path: 'react-scripts',␊
      spawnargs: [ 'start' ]␊
    }`

## should throw if framework=#custom but command is missing

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ 'command' and 'targetPort' properties are required when 'framework' is set to '#custom'`

## should throw if framework=#custom but targetPort is missing

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ 'command' and 'targetPort' properties are required when 'framework' is set to '#custom'`

## should start custom command if framework=#custom, command and targetPort are configured

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ◈ Starting Netlify Dev with #custom␊
    Error: spawn exit ENOENT␊
        at Process.ChildProcess._handle.onexit (node:internal/child_process:282:19)␊
        at onErrorNT (node:internal/child_process:480:16)␊
        at processTicksAndRejections (node:internal/process/task_queues:83:21) {␊
      errno: -2,␊
      code: 'ENOENT',␊
      syscall: 'spawn exit',␊
      path: 'exit',␊
      spawnargs: [ '1' ]␊
    }`

## should prompt when multiple frameworks are detected

> Snapshot 1

    `◈ Netlify Dev ◈␊
    ? Multiple possible start commands found (Use arrow keys or type to search)␊
    ❯ [Gatsby] 'gatsby develop' ␊
      [Create React App] 'react-scripts start' [2A[43D[75C[2B[2K[1A[2K[1A[2K[G? Multiple possible start commands found ␊
      [Gatsby] 'gatsby develop' ␊
    ❯ [Create React App] 'react-scripts start' [2A[43D[41C[2B[2K[1A[2K[1A[2K[G? Multiple possible start commands found Create React App-react-scripts start[77D[77C␊
    Add 'framework = "create-react-app"' to the [dev] section of your netlify.toml to avoid this selection prompt next time␊
    ◈ Starting Netlify Dev with Create React App␊
    Error: spawn react-scripts ENOENT␊
        at Process.ChildProcess._handle.onexit (node:internal/child_process:282:19)␊
        at onErrorNT (node:internal/child_process:480:16)␊
        at processTicksAndRejections (node:internal/process/task_queues:83:21) {␊
      errno: -2,␊
      code: 'ENOENT',␊
      syscall: 'spawn react-scripts',␊
      path: 'react-scripts',␊
      spawnargs: [ 'start' ]␊
    }`
